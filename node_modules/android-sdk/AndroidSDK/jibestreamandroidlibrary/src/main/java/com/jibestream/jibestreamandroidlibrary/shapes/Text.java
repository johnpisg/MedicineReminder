package com.jibestream.jibestreamandroidlibrary.shapes;

import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Paint.Align;
import android.graphics.Rect;
import android.graphics.RectF;


/**
 * Text shape abstraction for easy canvas calls
 * Created by emmanuel on 15-05-14.
 */
public class Text extends Shape implements IShapeText {
protected String textString = "Text";
private Paint lastPaint;

public Text() {
  this(null);
}

public Text(String textString) {
  super();
  if (textString != null) this.textString = textString;
}

private void calc() {
  if (lastPaint != null) {
    final Rect rect = new Rect();
    lastPaint.getTextBounds(textString, 0, textString.length(), rect);
    RectF bbox = new RectF(rect);
    final Align textAlign = lastPaint.getTextAlign();
    switch (textAlign) {
      case CENTER:
        bbox.offset(-bbox.centerX(), 0);
        break;
      case RIGHT:
        bbox.offset(-bbox.width(),0);
        break;

    }
    setBBox(bbox);
  }
}

public String getTextString() {
  return textString;
}

public synchronized void setTextString(String textString) {
  this.textString = textString;
  calc();
}

@Override
public void onDraw(Canvas canvas, Paint paint) {
  if (lastPaint != paint) {
    lastPaint = paint;
    calc();
  }
  canvas.drawText(textString, 0, 0, paint);
}
}
