package com.jibestream.androidsdk.customElements;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.RectF;

import com.jibestream.jibestreamandroidlibrary.elements.ElementHUD;
import com.jibestream.jibestreamandroidlibrary.elements.ElementMap;
import com.jibestream.jibestreamandroidlibrary.main.Camera;
import com.jibestream.jibestreamandroidlibrary.main.M;
import com.jibestream.jibestreamandroidlibrary.shapes.Shape;
import com.jibestream.jibestreamandroidlibrary.utils.ColorsMaterialDesign;

/**
 * Example class how to extend base class Element
 * Created by emmanuel on 15-05-13.
 */
public class Dots extends ElementMap {
private final Paint paint;
private M m;
public final DotShape s;

public Dots() {
  super();
  paint = new Paint();
  paint.setStyle(Paint.Style.STROKE);
  paint.setStrokeWidth(1);
  paint.setColor(ColorsMaterialDesign.WHITE);
  paint.setAlpha(30);
  s = new DotShape();
  setShape(s);
}

public void onUpdate(M m, long timeElapsed, long timeTotal, int fps, Camera camera) {
  super.onUpdate(m, timeElapsed, timeTotal, fps, camera);
  s.timeTotal = timeTotal;
  s.rectF = m.floorViewboxes[m.getCurrentMapIndex()];
  setBBox(s.rectF);
}

private static class DotShape extends Shape {
  public double timeTotal;
  public RectF rectF;

  @Override
  public void onDraw(Canvas canvas, Paint paint) {
    final float u = rectF.centerX();
    final float v = rectF.centerY();
    for (double i = 0; i < 20; i++) {
      double r = i / 20f;
      double s = Math.sin(timeTotal * 0.000001 * i - r * 6.28) * u * r;
      double c = Math.cos(timeTotal * 0.0000005 * i - r * 6.28) * v * r;
      canvas.drawCircle(
          (float) (u + s),
          (float) (v + c),
          (float) (10.0 * r + 1f), paint
      );
    }
  }
}
}
