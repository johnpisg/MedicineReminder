package com.jibestream.androidsdk.customElements;

import android.graphics.Canvas;
import android.graphics.Paint;

import com.jibestream.jibestreamandroidlibrary.main.Camera;
import com.jibestream.jibestreamandroidlibrary.main.M;
import com.jibestream.jibestreamandroidlibrary.shapes.Star;
import com.jibestream.jibestreamandroidlibrary.styles.RenderStyle;
import com.jibestream.jibestreamandroidlibrary.utils.ColorsMaterialDesign;

/**
 * Created by emmanuel on 15-07-24.
 */
public class Unit extends com.jibestream.jibestreamandroidlibrary.elements.Unit {
private Star star;

public Unit() {
  super();
  star = new Star();
  //Overriding styles brutally
  styleIdle = new RenderStyle(Paint.Style.FILL_AND_STROKE);
  styleIdle.paintFill.setColor(ColorsMaterialDesign.GREY6);
  styleIdle.paintStroke.setColor(ColorsMaterialDesign.GREY7);
  styleIdle.paintStroke.setStrokeWidth(2);

  styleSelected = new RenderStyle(Paint.Style.FILL);
  styleSelected.setFillColor(ColorsMaterialDesign.RED3);

  styleHighlighted = new RenderStyle(Paint.Style.FILL_AND_STROKE);
  styleHighlighted.setFillColor(ColorsMaterialDesign.GREY4);
  styleHighlighted.setStrokeColor(ColorsMaterialDesign.GREY8);
  styleHighlighted.setStrokeWidth(3);
}

@Override
public void setStyleIdle(RenderStyle style) {
  //Disable any sets applied after init
}

@Override
public void setStyleSelected(RenderStyle style) {
  //Disable any sets applied after init
}

@Override
public void setSelectState(boolean selectState) {
  super.setSelectState(selectState);
  if (selectState) {
    setUpdateInterval(1);
  } else {
    setUpdateInterval(0);
  }
}


@Override
public void onUpdate(M m, long timeElapsed, long timeTotal, int fps, Camera camera) {
  super.onUpdate(m, timeElapsed, timeTotal, fps, camera);
  // Do something crazy
  if (isSelectState()) {
    float cos = (float) Math.cos((timeTotal + id * 100) * 0.01f);
//  transform.setRotation(cos * 0.75f);
//  transform.setScale(cos * 0.5f + 0.5f);
    getTransform().setScale(cos * 0.01f + 0.99f);
    setUpdateInterval(1);
  } else {
//    transform.setRotation(0);
    getTransform().setScale(1);
    setUpdateInterval(0);
  }
}

@Override
public void onRender(Canvas canvas, Paint touchPaint) {
  super.onRender(canvas, touchPaint);
  // add a star to each unit
//  star.onDraw(canvas, styleIdle.paintStroke);
}
}
